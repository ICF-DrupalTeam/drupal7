# Docker and Docker Compose based environment for Drupal.
# See https://github.com/docksal/docksal for more information and documentation.

version: "2"

services:
  # Web node
  web:
    extends:
      file: .docksal/docksal-services.yml
      service: web
    environment:
      - VIRTUAL_HOST=drupal7.docksal,drupal7-site1.docksal,drupal7-site2.docksal

  # CLI node
  cli:
    extends:
      file: .docksal/docksal-services.yml
      service: cli

  # DB node
  db:
    extends:
      file: .docksal/docksal-services.yml
      service: db

  # Varnish node
  varnish:
    extends:
      file: .docksal/docksal-services.yml
      service: varnish
    environment:
      - VARNISH_BACKEND_HOST=web
      - VIRTUAL_HOST=varnish.drupal7.docksal,varnish.drupal7-site1.docksal,varnish.drupal7-site2.docksal

  # Selenium node
  browser:
    extends:
      file: .docksal/docksal-services.yml
      service: browser
